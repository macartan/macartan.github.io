<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Macartan Humphreys">
<meta name="dcterms.date" content="2024-01-04">

<title>exercises</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="exercises_files/libs/clipboard/clipboard.min.js"></script>
<script src="exercises_files/libs/quarto-html/quarto.js"></script>
<script src="exercises_files/libs/quarto-html/popper.min.js"></script>
<script src="exercises_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="exercises_files/libs/quarto-html/anchor.min.js"></script>
<link href="exercises_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="exercises_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="exercises_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="exercises_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="exercises_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="exercises_files/libs/quarto-contrib/foldbox/foldbox.css" rel="stylesheet">
<style>
.Q {
  --color1: #c0c0c0;
  --color2: #808080;
}
</style>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#intro" id="toc-intro" class="nav-link active" data-scroll-target="#intro">1: Intro</a>
  <ul class="collapse">
  <li><a href="#course-outline-tools" id="toc-course-outline-tools" class="nav-link" data-scroll-target="#course-outline-tools">1.1 Course outline, tools,</a></li>
  <li><a href="#introduction-to-declaredesign" id="toc-introduction-to-declaredesign" class="nav-link" data-scroll-target="#introduction-to-declaredesign">1.2 Introduction to <code>DeclareDesign</code></a></li>
  </ul></li>
  <li><a href="#causality" id="toc-causality" class="nav-link" data-scroll-target="#causality">2: Causality</a>
  <ul class="collapse">
  <li><a href="#fundamental-problems-and-basic-solutions" id="toc-fundamental-problems-and-basic-solutions" class="nav-link" data-scroll-target="#fundamental-problems-and-basic-solutions">2.1 Fundamental problems and basic solutions</a></li>
  <li><a href="#general-inquiries-and-causal-identification" id="toc-general-inquiries-and-causal-identification" class="nav-link" data-scroll-target="#general-inquiries-and-causal-identification">2.2 General inquiries and causal identification</a></li>
  </ul></li>
  <li><a href="#estimation-and-inference" id="toc-estimation-and-inference" class="nav-link" data-scroll-target="#estimation-and-inference">3: Estimation and Inference</a>
  <ul class="collapse">
  <li><a href="#frequentist" id="toc-frequentist" class="nav-link" data-scroll-target="#frequentist">3.1 Frequentist</a></li>
  <li><a href="#bayesian" id="toc-bayesian" class="nav-link" data-scroll-target="#bayesian">3.2 Bayesian</a></li>
  </ul></li>
  <li><a href="#design" id="toc-design" class="nav-link" data-scroll-target="#design">Design</a>
  <ul class="collapse">
  <li><a href="#experimental-design" id="toc-experimental-design" class="nav-link" data-scroll-target="#experimental-design">4.1 Experimental Design</a></li>
  <li><a href="#design-evaluation" id="toc-design-evaluation" class="nav-link" data-scroll-target="#design-evaluation">4.2 Design evaluation</a></li>
  </ul></li>
  <li><a href="#practice" id="toc-practice" class="nav-link" data-scroll-target="#practice">Practice</a>
  <ul class="collapse">
  <li><a href="#topics-and-techniques" id="toc-topics-and-techniques" class="nav-link" data-scroll-target="#topics-and-techniques">5.1 Topics and techniques</a></li>
  <li><a href="#open-science" id="toc-open-science" class="nav-link" data-scroll-target="#open-science">5.2 Open science</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">exercises</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Macartan Humphreys </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 4, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="intro" class="level1">
<h1>1: Intro</h1>
<section id="course-outline-tools" class="level2">
<h2 class="anchored" data-anchor-id="course-outline-tools">1.1 Course outline, tools,</h2>
</section>
<section id="introduction-to-declaredesign" class="level2">
<h2 class="anchored" data-anchor-id="introduction-to-declaredesign">1.2 Introduction to <code>DeclareDesign</code></h2>
</section>
</section>
<section id="causality" class="level1">
<h1>2: Causality</h1>
<section id="fundamental-problems-and-basic-solutions" class="level2">
<h2 class="anchored" data-anchor-id="fundamental-problems-and-basic-solutions">2.1 Fundamental problems and basic solutions</h2>
<div id="q-pos1" class="Q">
<details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 2.1</strong></summary><div>
<p>Potential outcomes</p>
<p>Consider an outcome Y that can be affected by two variables X1 and X2. All variables are binary. Can you fill in the potential outcomes (rows) for each of the column types?</p>
<table class="table">
<colgroup>
<col style="width: 26%">
<col style="width: 19%">
<col style="width: 19%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th>X1 is a necessary and sufficient condition for Y</th>
<th>X1 is necessary but not sufficient</th>
<th>X1 is sufficient but not necessary</th>
<th>X1 sometimes causes Y but is neither necessary nor sufficient</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Y(0,0) =</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Y(1,0) =</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Y(0,1) =</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Y(1,1) =</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div></details>
</div>
<div id="q-pos2" class="Q">
<p></p><details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 2.2</strong></summary><div>Consider an outcome Y that can be affected by two variables X1 and X2 but say that X2 can itself be affected by X1. Write down possible potential outcomes for Y1 and X2 when: X1 causes X2 and Y, but X1 does not cause Y through X2<p></p>
<p>Y(0,0) = <strong> Y(1,0) = </strong> Y(0,1) = <strong> Y(1,1) = </strong> X2(0) = <strong> X2(1) = </strong></p>
</div></details>
</div>
<div id="q-pos2" class="Q">
<details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 2.3</strong></summary><div>
<p>Consider a process with: Y(0,0) =0, Y(1,0) = 1, Y(0,1) =1, Y(1,1) =1.</p>
<ul>
<li>Say X1=1, X2=1. Then Y = 1. What caused Y = 1?</li>
<li>Say X1=0, X2=0. Then Y = 0. What caused Y = 0?</li>
<li>Say X1 = 1 with 10% probability, otherwise 0 and, independently, X2 = 1 with 50% probability, otherwise 0. Then what is the average effect of X1 on Y? What is the average effect of X2 on Y? Which cause has the biggest effect?</li>
</ul>
</div></details>
</div>
</section>
<section id="general-inquiries-and-causal-identification" class="level2">
<h2 class="anchored" data-anchor-id="general-inquiries-and-causal-identification">2.2 General inquiries and causal identification</h2>
<!-- See \ref{q-1}. -->
<div id="q-dagitty" class="Q">
<details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 2.4</strong></summary><div>
<ul>
<li>Draw a DAG with 5 nodes.</li>
<li>Figure out a set of nodes which, when controlled for, allow for the identification of the effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span></li>
<li>Represent it in <code>dagitty</code> and check your answer</li>
</ul>
</div></details>
</div>
<div id="q-1" class="Q">
<details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 2.5</strong></summary><div>
<p>Make a DAG that is consistent with this distribution</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">A</th>
<th style="text-align: right;">B</th>
<th style="text-align: right;">C</th>
<th style="text-align: right;">p</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.125</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.125</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.125</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.125</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.125</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.125</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.125</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.125</td>
</tr>
</tbody>
</table>
</div>
</div>
</div></details>
</div>
<div id="q-dag2" class="Q">
<details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 2.6</strong></summary><div>
<p>Make a DAG that is consistent with this distribution</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">A</th>
<th style="text-align: right;">B</th>
<th style="text-align: right;">C</th>
<th style="text-align: right;">p</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.32</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.08</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.08</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.02</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.08</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.12</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.12</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.18</td>
</tr>
</tbody>
</table>
</div>
</div>
</div></details>
</div>
</section>
</section>
<section id="estimation-and-inference" class="level1">
<h1>3: Estimation and Inference</h1>
<section id="frequentist" class="level2">
<h2 class="anchored" data-anchor-id="frequentist">3.1 Frequentist</h2>
<div id="q-ses" class="Q">
<details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 3.1</strong></summary><div>
<p>Learning about standard errors: Challenge</p>
<ul>
<li><p>The standard error is standard deviation of the sampling distribution of an estimate.</p></li>
<li><p>That sounds complicated, but actually the sampling distribution of an estimate lives in the simulations data frame so you can look at its standard deviation and assess whether standard errors estimate it well.</p></li>
<li><p><code>Challenge</code>: Generate a simple experimental design in which there is a correlation (<code>rho</code>) between the two potential outcomes (<code>Y_Z_0</code> and <code>Y_Z_1</code>). (You can use the <code>fabricatr:correlate</code> function). Assess the performance of the estimates of the standard errors and the coverage as <code>rho</code> goes from -1 to 0 to 1.</p></li>
<li><p>Say that you have a set of 20 schools randomly sampled from a superpopulation of schools. There are 5 classrooms in each school and 5 students in each class room.</p></li>
<li><p>Say you assign a treatment at the classroom level. Should you cluster your standard errors at the level of the school or at the level of the classroom?</p></li>
</ul>
<p>Now:</p>
<ul>
<li>Declare a design with this hierarchical data structure. Allow for the possibility that treatment effects vary at the school level. Assess the performance of the standard errors when you cluster at each of these levels (and when you do not cluster at all.</li>
<li>Examine whether the performance depends on whether you are interested in the population average effects or the sample average effects.</li>
</ul>
</div></details>
</div>
<div id="q-demeaning" class="Q">
<details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 3.2</strong></summary><div>
<p>Demeaning interactions</p>
<ul>
<li>Say you have a factorial design with treatments X1 and X2.</li>
<li>You analyse with a model that has main terms and interaction terms</li>
<li>Interpreting coefficients can be confusing, but sometimes demeaning can help. What does demeaning do?</li>
</ul>
<p>Let’s:</p>
<ul>
<li>Declare a factorial design in which Y is generated according to</li>
</ul>
<p><code>f_Y &lt;- function(X1, X2, u) .1 + .2*X1 + .3*X2 + u*X1*X2</code></p>
<p>where u is distributed <span class="math inline">\(U[0,1]\)</span>.</p>
<ul>
<li>Specify estimands carefully</li>
<li>Run analyses in which we do and do not demean the treatments; compare results</li>
</ul>
</div></details>
</div>
<div id="q-missing" class="Q">
<p></p><details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 3.3</strong></summary><div>Missing data on controls<p></p>
<p>Say you want to include a control variable. But you have missingness in the control. Should you proceed and what can you do about it?</p>
<p>Declare a design for an experiment in which a binary covariate X is related to potential outcomes, according to <code>b</code>, and so to treatment effects. Say <code>X</code> is missing with probability <code>p</code>.</p>
<p>Compare answer strategies in which you:</p>
<ol type="a">
<li>do not control for <span class="math inline">\(X\)</span></li>
<li>do control for <span class="math inline">\(X\)</span> but drop whenever <span class="math inline">\(X\)</span> is missing and</li>
<li>Treat <span class="math inline">\(X\)</span> as a block in your analysis design with three values (0, 1, and missing).</li>
</ol>
<p>Assess performance (RMSE) over a range of values for <code>p</code> and <code>b</code>. How do you think the comparison of strategies depends upon N?</p>
</div></details>
</div>
<div id="q-blockestimates" class="Q">
<details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 3.4</strong></summary><div>
<p>Consider the following data. Treatment is assigned in two blocks. One third of block 1 got treatment (randomly); one third of block two got treatment (randomly). The data are as below:</p>
<table class="table">
<thead>
<tr class="header">
<th>Block</th>
<th>Z</th>
<th>Y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td>2</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>2</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td>2</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td>2</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<ul>
<li>Can you estimate the ATE? How about the ATT? And the ATC?</li>
<li>How do these compare to a simple difference in means between treatment and control?</li>
<li>What would you get if you did OLS and controlled for block?</li>
</ul>
</div></details>
</div>
<div id="q-propensities" class="Q">
<p></p><details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 3.5</strong></summary><div>Propensities<p></p>
<p>Two of four units are going to be assigned to treatment. A researcher sets up a design in which subjects can decide for themselves the probability with which they receive a treatment. Requested propensities are as below.</p>
<p>Can you :</p>
<ol type="1">
<li>List the set of admissible treatment allocations</li>
<li>Describe a scheme for allocating subjects to treatment</li>
<li>Calculate your estimate under each allocation</li>
<li>Assess whether your estimate will be biased or not.</li>
</ol>
<p>|—————-|——–|——–| | Requested propensity | Y0 | Y1| | 0.2 |0 |1 | |0.4 |0 |2 | |0.6 |1 |3 | |0.8 |1 |4 |</p>
<p>[This is hard and long; so focus on the principles even if you do not have time to do all the calculations]</p>
</div></details>
</div>
<div id="q-weights" class="Q">
<p></p><details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 3.6</strong></summary><div>what weights<p></p>
<p>Say you sampled subject A with probability .6 and subject B with probability .4. Say you assigned each to treatment with probability .6. What weight should you put on A in your analysis if they end up in treatment? What if they end up in control? How about B?</p>
</div></details>
</div>
<div id="q-hyp" class="Q">
<p></p><details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 3.7</strong></summary><div>Hypothesis testing Say there are 20 students. One of them is randomly assigned to have an extra maths class. They take a test and are given grades. The student that got the extra class scored 73% which is higher than any of the other 19 students.<p></p>
<p>You are interested in calculating a p value for the hypothesis that the math class had no effect on grades. As a test statistic you use the difference in means between the treated student and the rest. What is the probability that the difference you see is so big under the null of no effect?</p>
</div></details>
</div>
<div id="q-ci" class="Q">
<p></p><details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 3.8</strong></summary><div>Confidence Intervals<p></p>
<p>Consider the same problem and say there were a gazillion students with grades spread evenly between 0 and 100. Say there was one treated student and this student had a grade of 95%. The difference in means estimate for the treatment effect is 45. Under the assumption of homogeneous treatment effects (and so allowing for the possibility that grades could go over 100 for treated units) can you construct a 90% confidence interval for this estimate.</p>
</div></details>
</div>
</section>
<section id="bayesian" class="level2">
<h2 class="anchored" data-anchor-id="bayesian">3.2 Bayesian</h2>
</section>
</section>
<section id="design" class="level1">
<h1>Design</h1>
<section id="experimental-design" class="level2">
<h2 class="anchored" data-anchor-id="experimental-design">4.1 Experimental Design</h2>
<div id="q-rand1" class="Q">
<details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 4.1</strong></summary><div>
<p>Randomization</p>
<p>100 students sign up to take part in an experiment. You want to measure the effect of immigration on social trust. Half your subjects are men and half are women and you believe gender is very predictive of social trust.</p>
<p>Your experiment involves varying whether a “native” or an “immigrant” facilitator instructs players in how to play a trust game. You have five native and five immigrant facilitators and you want them each to conduct one session with 10 subjects.</p>
<ul>
<li><p>You are free to assign both subjects and facilitators to sessions. Propose an appropriate randomization strategy. Is it blocked? Clustered? Both?</p></li>
<li><p>Say now that subjects have already signed up for sessions. You can only assign facilitators to sessions, but you have access to the subject lists before you do so. Describe your optimal randomization strategy. Is it blocked? Clustered? Both?</p></li>
</ul>
</div></details>
</div>
<div id="q-rand2" class="Q">
<p></p><details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 4.2</strong></summary><div>Network Randomization<p></p>
<p>You have access to a network of all friendship links in a classroom. You want to provide political information to a set of students and see how muc more likely it is that a student that you do not give information to receives the information if a friend is treated compared to the situation in which a friend of a friend is treated. So you want to be sure that some subjects have friends treated and some have only friends of friends treated. How would you assign treatment? How can you work out your treatment assignment probabilities?</p>
</div></details>
</div>
</section>
<section id="design-evaluation" class="level2">
<h2 class="anchored" data-anchor-id="design-evaluation">4.2 Design evaluation</h2>
<div id="q-blocks" class="Q">
<details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 4.3</strong></summary><div>
<p>Assess</p>
<ul>
<li>Power for an interaction (in a factorial design)</li>
<li>Power for a binary variable (versus a continuous variable?)</li>
<li>Power from adding covariates in the analysis stage</li>
<li>Power gains from blocked randomization</li>
<li>Power losses from clustering at different levels</li>
</ul>
</div></details>
</div>
<div id="q-blocks" class="Q">
<p></p><details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 4.4</strong></summary><div>Gain from covariates<p></p>
<p>Equation (4.6) in FEDAI suggests that if the sum of two slopes exceeds 1 then there are gains in efficiency from adding a covariate. Show that this is true in practice using a design declaration.</p>
</div></details>
</div>
<div id="q-blocks" class="Q">
<p></p><details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 4.5</strong></summary><div>Comparing estimators<p></p>
<p>It is not uncommon that different units are assigned to treatments with different probabilities. e.g.&nbsp;men and women, or people in different counties. This might happen for example if 100 people are selected from each group but groups are different sizes. But there can be many reasons for this.</p>
<p>The go-to approach is to control for blocks using fixed effects. But this is not guaranteed to be correct.</p>
<p>Declare a design that compares different approaches to taking account for blocks. e.g.</p>
<ul>
<li>Fixed effects</li>
<li>Blocked differences in means</li>
<li>The saturated (Lin) estimator</li>
<li>IPW</li>
<li>Horvitz Thompson</li>
</ul>
<p>Compare how they perform in terms of the bias of the effect estimate and the bias of the standard error estimate.</p>
<p>Try with three blocks with different assignment probabilities and also with heterogeneous effects by group.</p>
</div></details>
</div>
</section>
</section>
<section id="practice" class="level1">
<h1>Practice</h1>
<section id="topics-and-techniques" class="level2">
<h2 class="anchored" data-anchor-id="topics-and-techniques">5.1 Topics and techniques</h2>
<div id="q-spillovers" class="Q">
<details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 5.1</strong></summary><div>
<p>Imagine a study with three subjects. Each subjects potential outcomes are as follows:</p>
<ul>
<li>0 if in control</li>
<li>n if in treatment and n subjects are assigned to treatment</li>
</ul>
<p>So for example if one unit is in treatment that unit has outcome Y=1, and the others have Y = 0; if all 3 are in treatment they all have Y=3.</p>
<ol type="1">
<li>Write down the potential outcomes for all possible assignments, including all and none assigned o treatment</li>
<li>Write down the difference in means calculation for each possible assignment</li>
<li>Define two estimands of interest.</li>
<li>Define a randomization scheme that will return an unbiased estimate of each estimand.</li>
<li>Define a randomization scheme that will return a biased estimate of each estimand.</li>
</ol>
</div></details>
</div>
<div id="q-late" class="Q">
<details class="Q fbx-simplebox fbx-default" open=""><summary><strong>Q 5.2</strong></summary><div>
<p>LATE</p>
<p>Which of these problems could be addressed using instrumental variables. In each case what kinds of concern might you have about the IV strategy?</p>
<ol type="1">
<li>Experimenters introduce a unconditional cash transfers into a set of villages in 2012 and use it to measure access school attendance in 2015. You come on the scene later and are interested in whether the transfer could have led to greater political participation in 2017.</li>
<li>Experimenters introduce an unconditional cash transfers into a set of villages in 2012 and use it to measure access school attendance in 2015. You come on the scene later and are interested in whether the increased school attendance could have led to greater political participation in 2017.</li>
<li>You want to understand the effects of attending a rally on subsequent support for a candidate. You send a random set of voters a flyer about an upcoming demonstration.</li>
<li>You want to understand the effects of attending a rally on subsequent support for a candidate. You send a random set of voters a flyer about an upcoming demonstration but you find out later that your enumerators did not deliver the flyers in a bunch of areas.</li>
<li>You want to understand the effects sending flyers about an upcoming demonstration but you find out later that your computer code used incomplete data when making assignments and so failed to assign treatment to a whole bunch of regions.</li>
<li>You want to understand whether sending flyers increases participation because people actually go to the rallies or because people’s general level awareness of the election increases, whether or not they go.</li>
</ol>
</div></details>
</div>
</section>
<section id="open-science" class="level2">
<h2 class="anchored" data-anchor-id="open-science">5.2 Open science</h2>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>